# le nom de l'hôte ou groupe concerné
---
- hosts: jhipster
  roles:
    - install-jhipster
    - { role: "ansible-beats", beat: "filebeat",
        become: true,
        beat_conf: {
          "filebeat": {
            "prospectors":[{
              "paths":["{{jhipster_log_dir}}/{{java_app_artifact_id}}/json-log.json"],
              "input_type":"log"
            }]
          }
        },
        "output_conf": {
          "logstash": {
            "hosts": ["{{groups['logstash'][0]}}:5044"],
            "loadbalance": true
          }
        }
    }